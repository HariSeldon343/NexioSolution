# OnlyOffice Configuration for Docker Setup
# Copy this file to .env and update with your values

# ================================================================
# ONLYOFFICE DOCUMENT SERVER CONFIGURATION
# ================================================================

# OnlyOffice Document Server URL (as seen from browser)
ONLYOFFICE_DS_PUBLIC_URL=http://localhost:8082

# OnlyOffice Document Server URL (internal Docker network)
# If using Docker, this might be different from public URL
ONLYOFFICE_DS_INTERNAL_URL=http://localhost:8082

# ================================================================
# JWT SECURITY CONFIGURATION (REQUIRED)
# ================================================================

# Enable JWT Authentication (ALWAYS true in production)
ONLYOFFICE_JWT_ENABLED=true

# JWT Secret Key - MUST match the key used in Docker run command
# Example Docker command:
# docker run -d -p 8082:80 --name onlyoffice-ds \
#   -e JWT_ENABLED=true \
#   -e JWT_SECRET=nexio-secret-key-2025-onlyoffice-jwt-secure-token \
#   onlyoffice/documentserver
ONLYOFFICE_JWT_SECRET=nexio-secret-key-2025-onlyoffice-jwt-secure-token

# JWT Algorithm (HS256 or HS512)
ONLYOFFICE_JWT_ALGORITHM=HS256

# JWT Header name (usually Authorization)
ONLYOFFICE_JWT_HEADER=Authorization

# ================================================================
# CALLBACK CONFIGURATION
# ================================================================

# Callback URL for OnlyOffice to send save notifications
# This must be accessible from the OnlyOffice container
ONLYOFFICE_CALLBACK_URL=http://host.docker.internal/piattaforma-collaborativa/backend/api/onlyoffice-callback.php

# If OnlyOffice is in Docker and your app is on localhost
ONLYOFFICE_CALLBACK_HOST=host.docker.internal

# ================================================================
# SECURITY SETTINGS (OPTIONAL BUT RECOMMENDED)
# ================================================================

# Rate limiting (requests per minute)
ONLYOFFICE_RATE_LIMIT=60

# Debug mode (set to false in production)
ONLYOFFICE_DEBUG=false

# Force HTTPS in production
ONLYOFFICE_FORCE_HTTPS=false

# Allowed IPs for callbacks (comma-separated, empty = allow all)
ONLYOFFICE_ALLOWED_IPS=

# CORS allowed origins (comma-separated)
ONLYOFFICE_CORS_ORIGINS=http://localhost,http://localhost:8082

# ================================================================
# FILE SETTINGS
# ================================================================

# Maximum file size in bytes (100MB default)
ONLYOFFICE_MAX_FILE_SIZE=104857600

# Session timeout in seconds (1 hour default)
ONLYOFFICE_SESSION_TIMEOUT=3600

# Request timeout in seconds
ONLYOFFICE_TIMEOUT=30

# ================================================================
# APPLICATION SETTINGS
# ================================================================

# Application environment (development/production)
APP_ENV=development

# Database configuration (if not already set)
DB_HOST=localhost
DB_NAME=nexiosol
DB_USER=root
DB_PASS=

# ================================================================
# DOCKER COMMANDS FOR REFERENCE
# ================================================================

# To run OnlyOffice Document Server with JWT:
# docker run -d -p 8082:80 --name onlyoffice-ds \
#   -e JWT_ENABLED=true \
#   -e JWT_SECRET=nexio-secret-key-2025-onlyoffice-jwt-secure-token \
#   -e JWT_HEADER=Authorization \
#   onlyoffice/documentserver

# To check if OnlyOffice is running:
# docker ps | grep onlyoffice-ds

# To view OnlyOffice logs:
# docker logs onlyoffice-ds

# To restart OnlyOffice:
# docker restart onlyoffice-ds

# To stop and remove OnlyOffice:
# docker stop onlyoffice-ds && docker rm onlyoffice-ds